mixed-port: 7890
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
external-controller: '127.0.0.1:9090'
dns:
    enable: true
    ipv6: false
    default-nameserver: [223.5.5.5, 119.29.29.29]
    enhanced-mode: redir-host
    fake-ip-range: 198.18.0.1/16
    use-hosts: true
    nameserver: ['https://doh.pub/dns-query', 'https://dns.alidns.com/dns-query']
    fallback: ['https://doh.dns.sb/dns-query', 'https://dns.cloudflare.com/dns-query', 'https://dns.twnic.tw/dns-query', 'tls://8.8.4.4:853']
    fallback-filter: { geoip: true, ipcidr: [240.0.0.0/4, 0.0.0.0/32] }

proxies:
  - name: "ss"
    type: ss
    server: icook.hk
    port: 443
    cipher: chacha20-ietf-poly1305
    password: "3e7e830a-9be5-41c1-ad8b-b08403f33782"
    plugin: v2ray-plugin
    plugin-opts:
      mode: websocket # no QUIC now
      tls: true 
      # skip-cert-verify: true
      host: vvtss.linzjian666vv.ml
      path: "/3e7e830a-9be5-41c1-ad8b-b08403f33782-sh"
      # mux: true
      # headers:
      #   custom: value

  - name: "vmess"
    type: vmess
    server: icook.hk
    port: 443
    uuid: 3e7e830a-9be5-41c1-ad8b-b08403f33782
    alterId: 32
    cipher: auto
    udp: true
    # tls: true
    # skip-cert-verify: 
    # servername: vvtss.linzjian666vv.ml
    network: ws
    ws-opts:
      path: /3e7e830a-9be5-41c1-ad8b-b08403f33782-vm
      headers:
        Host: vvtss.linzjian666.workers.dev
    #   max-early-data: 2048
    #   early-data-header-name: Sec-WebSocket-Protocol

  - name: "vmess-tls"
    type: vmess
    server: icook.hk
    port: 443
    uuid: 3e7e830a-9be5-41c1-ad8b-b08403f33782
    alterId: 32
    cipher: auto
    udp: true
    tls: true
    # skip-cert-verify: 
    servername: vvtss.linzjian666vv.ml
    network: ws
    ws-opts:
      path: /3e7e830a-9be5-41c1-ad8b-b08403f33782-vm
      headers:
        Host: vvtss.linzjian666vv.ml
    #   max-early-data: 2048
    #   early-data-header-name: Sec-WebSocket-Protocol

  - name: "vless"
    type: vless
    server: icook.hk
    port: 443
    uuid: uuid
    udp: true
    tls: true
    network: ws
    servername: vvtss.linzjian666vv.ml
    # skip-cert-verify: true
    ws-opts:
      path: "/3e7e830a-9be5-41c1-ad8b-b08403f33782-vl"
      headers:
        Host: vvtss.linzjian666vv.ml

  - name: trojan
    server: icook.hk
    port: 443
    type: trojan
    password: "3e7e830a-9be5-41c1-ad8b-b08403f33782"
    network: ws
    sni: vvtss.linzjian666vv.ml
    # skip-cert-verify: true
    udp: true
    ws-opts:
      path: /3e7e830a-9be5-41c1-ad8b-b08403f33782-tr
      headers:
        Host: vvtss.linzjian666vv.ml

proxy-groups:
  - name: Proxy
    type: select              #手动代理组
    # disable-udp: true
    proxies:
      - ss
      - vmess
      - vmess-tls
      - vless
      - trojan

rules:
    - GEOSITE,category-ads-all,REJECT
    - GEOSITE,icloud@cn,DIRECT
    - GEOSITE,apple@cn,DIRECT
    - GEOSITE,apple-cn,DIRECT
    - GEOSITE,microsoft@cn,DIRECT
    - GEOSITE,facebook,PROXY
    - GEOSITE,youtube,PROXY
    - GEOSITE,geolocation-cn,DIRECT
    - GEOSITE,geolocation-!cn,PROXY
    - GEOIP,telegram,PROXY,no-resolve
    - GEOIP,private,DIRECT,no-resolve
    - GEOIP,cn,DIRECT